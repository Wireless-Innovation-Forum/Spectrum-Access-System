{
  "$schema": "http://json-schema.org/draft-04/schema#",

  "RegistrationRequest": {
    "description": "Registration parameters provided for a CBSD",
    "type": "object",
    "required": [ "cbsdCategory", "callSign", "userId", "airInterface",
                  "fccId", "cbsdManufacturer", "cbsdSerialNumber", "maximumGrants",
                  "sensingCapability", "installationParam" ],
    "properties": {
      "userId": { "type": "string",
                  "description": "Unique user designator for the operator. Generation mechanism TBD" },
      "fccId": { "type": "string",
                 "description": "The certification FCC ID for the hardware" },
      "cbsdSerialNumber": { "type": "string",
                            "description": "Unique identifier for the CBSD chosen by the manufacturer" },
      "cbsdManufacturer": { "type": "string",
                            "description": "Name of the device manufacturer" },
      "cbsdCategory": { "enum" : [ "A", "B" ],
                        "description": "A if the device is Category A; B if it is Category B" },
      "callSign": { "type": "string",
                    "description": "The call sign for the operator. Meaning and origin TBD" },
      "maximumGrants": { "type": "number",
                         "description": "Maximum number of grants which is supported by the device",
                         "minimum": 1 },
      "sensingCapability": { "type": "array",
                             "description": "List of supported sensing capabilities of the device",
                             "items": { "enum": [ "esc", "receivedInterferencePower" ],
                                        "description": "Measurement capabilities of the CBSD." }
                           },
      "airInterface": { "$ref": "#/AirInterface" },
      "installationParam": { "$ref": "#/InstallationParam" }
    }
  },

  "RegistrationResponse": {
    "description": "Registration response parameters returned to a CBSD",
    "type": "object",
    "required": [ "cbsdId", "error" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Globally unique string generated by the SAS which identifies this CBSD." },
      "error": { "$ref": "#/Error" }
    }
  },

  "GrantRequest": {
    "description": "Spectrum Grant parameters provided by a CBSD",
    "type": "object",
    "required": [ "cbsdId", "operationParam" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as returned from the registration procedure." },
      "operationParam": { "$ref": "#/OperationParam" }
    }
  },

  "GrantResponse": {
    "description": "Spectrum Grant response message to the CBSD.",
    "type": "object",
    "required": [ "cbsdId", "error" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "CBSD identifier as passed in the spectrum grant request." },
      "grantId": { "type": "string",
                   "description": "A unique ID marking a spectrum grant originated from the SAS. If error.errorCode is non-zero, this must not be present." },
      "grantExpireTime": { "type": "string",
                           "description": "RFC3339 date-time stamp indicating when the grant expires." },
      "heartbeatDuration": { "type": "number",
                             "minimum": 1,
                             "description": "Indicates an interval in seconds the CBSD should use between heartbeat requests." },
      "measReportConfig": { "$ref": "#/MeasReportConfig" },
      "operationParam": { "$ref": "#/OperationParam" },
      "error": { "$ref": "#/Error" }
    }
  },

  "RelinquishmentRequest": {
    "description": "Grant Relinquish parameters provided by a CBSD",
    "type": "object",
    "required": [ "cbsdId", "grantId" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as returned from the registration procedure." },
      "grantId": { "type": "string",
                   "description": "Unique designator for the grant to be relinquished. Gotten from the SAS upon grant request procedure." }
    }
  },

  "RelinquishmentResponse": {
    "description": "Relinquishment response provided to a CBSD",
    "type": "object",
    "required": [ "cbsdId", "grantId", "error" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as provided in the relinquishment request." },
      "grantId": { "type": "string",
                   "description": "Unique designator for the grant as provided in the relinquishment request." },
      "error": { "$ref": "#/Error" }
    }
  },

  "DeregistrationRequest": {
    "description": "Deregistration parameters provided by a CBSD",
    "type": "object",
    "required": [ "cbsdId" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as returned from the registration procedure." }
    }
  },

  "DeregistrationResponse": {
    "description": "Deregistration response provided to a CBSD",
    "type": "object",
    "required": [ "cbsdId", "error" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as provided in the deregistration request." },
      "error": { "$ref": "#/Error" }
    }
  },

  "HeartbeatRequest": {
    "description": "Heartbeat parameters provided by a CBSD",
    "type": "object",
    "required": [ "cbsdId", "grantId" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as returned from the registration procedure." },
      "grantId": { "type": "string",
                   "description": "Unique designator for the grant as returned from the spectrum grant procedure." },
      "grantRenew": { "type": "boolean",
                      "description": "If set to true, the CBSD is asking for a renewal of the grant." },
      "operationState": { "enum": [ "Transmission", "Granted" ],
                          "description": "If present, represents the current state of operation of the CBSD. The CBSD should include this field if requested by the SAS in a previous operationStatusReq field in a heartbeat response." },
      "operationParam": { "$ref": "#/OperationParam" },
      "measReport": { "$ref": "#/MeasReport" }
    }
  },

  "HeartbeatResponse": {
    "description": "Heartbeat response provided to a CBSD",
    "type": "object",
    "required": [ "cbsdId", "grantId", "transmitExpireTime", "error" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as passed in the heartbeat request." },
      "grantId": { "type": "string",
                   "description": "Unique designator for the grant as passed in the heartbeat request." },
      "operationStatusReq": { "type": "boolean",
                              "description": "If true, requests the CBSD to pass the operationState at the next heartbeat." },
      "transmitExpireTime": { "type": "string",
                              "description": "An RFC3339-formatted string indicating the time the CBSD can transmit until." },
      "grantExpireTime": { "type": "string",
                           "description": "An RFC3339-formatted string indicating the expiry time of the CBSD grant." },
      "heartbeatDuration": { "type": "number",
                             "minimum": 1,
                             "description": "If present, the CBSD is required to use the indicated heartbeat duration in subsequent heartbeat requests." },
      "operationParam": { "$ref": "#/OperationParam" },
      "measReportConfig": { "$ref": "#/MeasReportConfig" },
      "error": { "$ref": "#/Error" }
    }
  },

  "SpectrumInquiryRequest": {
    "description": "Spectrum Inquiry parameters provided by a CBSD",
    "type": "object",
    "required": [ "cbsdId", "inquiredSpectrum" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as returned from the registration procedure." },
      "palCredential": { "type": "array",
                         "description": "If the CBSD has PAL rights, they may be communicated to the SAS here.",
                         "additionalItems": false,
                         "items": { "type": "string" } },
      "inquiredSpectrum": { "type": "array",
                            "additionalItems": false,
                            "description": "Description of the frequency range(s) the CBSD is inquiring about.",
                            "items": { "$ref": "#/FrequencyRange" } }
    }
  },

  "SpectrumInquiryResponse": {
    "description": "Spectrum Inquiry response returned to a CBSD",
    "type": "object",
    "required": [ "cbsdId", "availableChannel", "error" ],
    "properties": {
      "cbsdId": { "type": "string",
                  "description": "Unique designator for the CBSD as passed to the spectrum inquiry procedure." },
      "availableChannel": { "type": "array",
                            "description": "An array of available channels returned by the SAS covered by the inquiredSpectrum array in the request.",
                            "additionalItems": false,
                            "items": { "$ref": "#/AvailableChannelObject" } },
      "error": { "$ref": "#/Error" }
    }
  },

  "AvailableChannelObject": {
    "type": "object",
    "description": "Response from the SAS to an inquiry for available channels within a particular frequency range. Note that the frequency ranges in the response need not correspond to the frequency ranges in the request. Instead, the provided response frequency ranges describe possible channels for the CBSD.",
    "required": [ "frequencyRange", "channelType", "ruleApplied" ],
    "properties": {
      "frequencyRange": { "$ref": "#/FrequencyRange" },
      "channelType": { "enum": [ "PAL", "GAA" ],
                       "description": "The channel type corresponding to the associated frequency range, either PAL or GAA" },
      "ruleApplied": { "enum": [ "FCC Part 96" ],
                       "description": "The rule applied in generating the channel availability list in this frequency range." }
    }
  },

  "AirInterface": {
    "description": "Air interface parameter for a CBSD",
    "type": "object",
    "required": [ "radioTechnology" ],
    "properties": {
      "radioTechnology": { "enum": [ 
                                     "E-UTRA",
                                     "802.11" ],
                           "description": "Which PHY radio technology is used by the device in the 3.5GHz band" },
      "supportedSpec": { "type": "string",
                         "description": "Description of the spec of the radio technology supported." }

    }
  },

  "Error": {
    "description": "Error data for SAS communications",
    "type": "object",
    "required": ["errorCode"],
    "properties": {
      "errorCode" : { "enum": [
                                0,
                                100, 101, 102, 103, 104,
                                200, 201,
                                300,
                                400, 401, 402,
                                500, 501, 502 ],
                      "description": "An integer indicating the type of error. 0 means success (no error)" },
      "errorMessage" : { "type": "string",
                         "description": "A detailed human-readable string describing the error." },
      "errorData" : { "type": "object",
                      "description": "Additional error-dependent structured data containing more information about an error",
                      "additionalProperties": true }
    }
  },

  "FreqencyRange": {
    "description": "Describes a frequency range. The range is provided as a pair of numbers which describe the bounding values of the range.",
    "type": "object",
    "required": [ "lowFrequency", "highFrequency" ],
    "properties": {
      "lowFrequency": { "type": "number",
                        "minimum": 0,
                        "description": "The lower frequency of the range in Hz." },
      "highFrequency": { "type": "number",
                         "minimum": 0,
                         "description": "The higher frequency of the range in Hz. Must be greater than lowFrequency." }
    }
  },

  "InstallationParam": {
    "description": "Installation parameters provided for a CBSD",
    "type": "object",
    "properties": {
      "latitude": { "type": "number",
                    "description": "Latitude in WGS84 coordinates, provided in decimal degrees",
                    "minimum": -90,
                    "maximum": 90 },
      "longitude": { "type": "number",
                     "description": "Longitude in WGS84 coordinates, provided in decimal degrees",
                     "minimum": -180,
                     "maximum": 180 },
      "height": { "type": "number",
                  "description": "Height above ground level, provided in meters" },
      "heightType": { "enum": [ "AMSL", "AGL" ],
                      "description": "The reference for the height parameter. AMSL indicates the height is measured relative to mean sea level. AGL indicates the height is measured relative to local ground level at latitude, longitude." },
      "horizontalAccuracy": { "type": "number",
                              "description": "A measurement in meters of the horizontal accuracy of the indicated location.",
                              "minimum": 0 },
      "verticalAccuracy": { "type": "number",
                            "description": "A measurement in meters of the vertical accuracy of the indicated location.",
                            "minimum": 0 },
      "indoorDeployment": { "type": "boolean",
                            "description": "True if the equipment is installed indoors, false if outdoors" },
      "antennaAzimuth": { "type": "number",
                          "description": "Heading of antenna azimuth relative to true north, provided in decimal degrees. Positive indicates easterly.",
                          "minimum": -360,
                          "maximum": 360 },
      "antennaDowntiltMech": { "type": "number",
                               "description": "Mechanical tilt of the antenna (vertically down is positive) in decimal degrees.",
                               "minimum": -90,
                               "maximum": 90 },
      "antennaDowntiltElec": { "type": "number",
                               "description": "Electrical tilt of the antenna (vertically down is positive) in decimal degrees.",
                               "minimum": -90,
                               "maximum": 90 },
      "antennaGain": { "type": "number",
                       "description": "Maximum gain in dB of the antenna along the boresight" },
      "antennaBeamwidth": { "type": "number",
                            "description": "Beamwidth to 3dB points of the antenna coverage pattern, provided in decimal degrees and measured at the horizon." },
      "antennaModel": { "type": "string",
                        "description": "If an external antenna is used, the model of the antenna is optionally provided in this field." }
    }
  },

  "MeasReport": {
    "description": "Measurement report provided by a CBSD.",
    "type": "object",
    "additionalproperties": true
  },

  "MeasReportConfig": {
    "description": "Measurement report configuration parameters. Indicates to a CBSD which spectrum measurement the SAS wishes it to perform.",
    "type": "object",
    "additionalproperties": true
  },

  "OperationParam": {
    "description": "Operational parameters provided for a CBSD",
    "type": "object",
    "required": [ "peakPower", "operationFrequencyRange" ],
    "properties": {
      "palCredential": { "type": "array",
                         "description": "List of any PAL credentials which apply to this operating parameter set",
                         "additionalItems": false,
                         "items": { "type": "string" } },
      "peakPower": { "type": "number",
                     "minimum": 0,
                     "description": "The peak operating power in dBm/MHz to be used by the CBSD within this operating parameter set" },
      "operationFrequencyRange": { "$ref": "#/FrequencyRange" }
    }
  }
}

